(window.webpackJsonp=window.webpackJsonp||[]).push([["loader"],{J30X:function(t,e,r){r("I+eb")({target:"Array",stat:!0},{isArray:r("6LWA")})},PPAC:function(t,e,r){"use strict";r.r(e);r("z7dE");var n=r("q1tI"),o=r.n(n),a=r("i8i4"),i=r.n(a),s=(r("J30X"),r("4mDm"),r("07d7"),r("5s+n"),r("PKPk"),r("3bBZ"),r("Kz25"),r("vz/u")),l=r("WM5q"),c=r("wlN6");function u(t,e){return function(t){if(Array.isArray(t))return t}
/**
 * Pimcore
 *
 * This source file is available under following license:
 * - Pimcore Enterprise License (PEL)
 *
 *  @copyright  Copyright (c) Pimcore GmbH (http://www.pimcore.org)
 *  @license    http://www.pimcore.org/license     PEL
 */(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t){var e=u(Object(n.useState)(null),2),r=e[0],a=e[1];return Object(n.useEffect)((function(){fetch(t.loadConfigurationUrl+"?"+new URLSearchParams({configurationId:t.configId})).then(l.a).then((function(t){return t.json()})).then((function(t){var e=JSON.parse(t.configuration);a(e)})).catch((function(t){console.error(t),toast.error("Error loading configuration.",{autoClose:!1})}))}),[]),r?o.a.createElement(s.a,{configurationId:t.configId,showTable:r.showTable,showChart:r.showChart,chartType:r.chartType,dataUrl:t.resultDataUrl,selectedDataSource:r.selectedDataSource,statisticMode:r.statisticMode,rows:r.rows,columns:r.columns,filters:r.filters,fieldSettings:r.fieldSettings}):o.a.createElement(c.a,null)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}
/**
 * Pimcore
 *
 * This source file is available under following license:
 * - Pimcore Enterprise License (PEL)
 *
 *  @copyright  Copyright (c) Pimcore GmbH (http://www.pimcore.org)
 *  @license    http://www.pimcore.org/license     PEL
 */for(var d=window.statisticsExplorerConfig||{},y=!0,m=0,g=["loadConfigurationUrl","resultDataUrl","translationsUrl"];m<g.length;m++){var b=g[m];d[b]||(console.error("Missing config option `"+b+"`."),y=!1)}if(y){var v,S=function(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(document.getElementsByClassName("statistics-container"));try{for(S.s();!(v=S.n()).done;){var w=v.value,E=o.a.createElement(p,{configId:w.dataset.configId,loadConfigurationUrl:d.loadConfigurationUrl,resultDataUrl:d.resultDataUrl});i.a.render(E,w)}}catch(t){S.e(t)}finally{S.f()}}},WM5q:function(t,e,r){"use strict";r("07d7"),r("5s+n"),r("ls82");function n(t,e,r,n,o,a,i){try{var s=t[a](i),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,a){var i=t.apply(e,r);function s(t){n(i,o,a,s,l,"next",t)}function l(t){n(i,o,a,s,l,"throw",t)}s(void 0)}))}}
/**
 * Pimcore
 *
 * This source file is available under following license:
 * - Pimcore Enterprise License (PEL)
 *
 *  @copyright  Copyright (c) Pimcore GmbH (http://www.pimcore.org)
 *  @license    http://www.pimcore.org/license     PEL
 */function a(){return(a=o(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=9;break}return t.next=3,e.json();case 3:if((r=t.sent).success){t.next=8;break}throw Error(r.message);case 8:throw Error(e.statusText);case 9:return t.abrupt("return",e);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.a=function(t){return a.apply(this,arguments)}},"vz/u":function(t,e,r){"use strict";r.d(e,"a",(function(){return O}));r("TeQF");var n=r("q1tI"),o=r.n(n),a=(r("4mDm"),r("2B1R"),r("wLYn"),r("sMBO"),r("NBAS"),r("ExoC"),r("07d7"),r("5s+n"),r("PKPk"),r("3bBZ"),r("R5XZ"),r("Kz25"),r("wlN6")),i=r("WM5q"),s=r("4XXU");function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/**
 * Pimcore
 *
 * This source file is available under following license:
 * - Pimcore Enterprise License (PEL)
 *
 *  @copyright  Copyright (c) Pimcore GmbH (http://www.pimcore.org)
 *  @license    http://www.pimcore.org/license     PEL
 */var d=["#a50026","#d73027","#f36d42","#fbae61","#fee090","#abd9e9","#74acd0","#4576b5","#08306b","#54278f","#7a0177","#c994c7","#a1d99b","#41ab5d","#238b45","#00441b"],y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,t);var e,r,n,l=f(p);function p(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=l.call(this,t)).isLoading=!1,e.state={error:null,isLoaded:!1,showLoadingSpinner:!1,chart:{data:[],columnHeaders:[]}},e}return e=p,(r=[{key:"loadData",value:function(t,e,r,n,o,a,s){this.isLoading&&this.controller.abort(),this.isLoading=!0,this.controller=new AbortController,this.signal=this.controller.signal;var l=t.map((function(t){return t.value})),c=e.map((function(t){return t.value}));if(l.length>0){this.setState({showLoadingSpinner:!0});var u=new URLSearchParams({rows:l,columns:c,dataSource:o.value,fieldSettings:n,filters:a,configurationId:s,chartData:!0});this.loadingTimeout&&clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout(function(){var t=this;fetch(r+"?"+u,{signal:this.signal}).then(i.a).then((function(t){return t.json()})).then((function(e){var r={chart:{data:e.data,columnHeaders:e.columnHeaders},showLoadingSpinner:!1};t.setState(r)})).catch((function(e){console.error(e),"AbortError"!==e.name&&t.setState({chart:{data:[],columnHeaders:[]},showLoadingSpinner:!1}),t.isLoading=!1}))}.bind(this),800)}else this.setState({chart:{data:[],columnHeaders:[]},showLoadingSpinner:!1})}},{key:"componentDidMount",value:function(){this.loadData(this.props.rows,this.props.columns,this.props.dataUrl,this.props.fieldSettings,this.props.selectedDataSource,this.props.filters,this.props.configurationId)}},{key:"componentDidUpdate",value:function(t,e,r){this.props.columns===t.columns&&this.props.rows===t.rows&&this.props.fieldSettings===t.fieldSettings&&this.props.filters===t.filters&&this.props.selectedDataSource.value===t.selectedDataSource.value||this.loadData(this.props.rows,this.props.columns,this.props.dataUrl,this.props.fieldSettings,this.props.selectedDataSource,this.props.filters,this.props.configurationId)}},{key:"renderChart",value:function(){return"Line"===this.props.chartType?this.renderChartTypeLine():"Bar"===this.props.chartType?this.renderChartTypeBar():"Area"===this.props.chartType?this.renderChartTypeArea():"Pie"===this.props.chartType?this.renderChartTypePie():null}},{key:"renderChartTypeLine",value:function(){return o.a.createElement(s.i,{data:this.state.chart.data},o.a.createElement(s.e,{strokeDasharray:"3 3"}),this.state.chart.columnHeaders.map((function(t,e){return o.a.createElement(s.h,{key:e,name:t.label,dataKey:t.dataKey,stroke:d[e]})})),o.a.createElement(s.n,{dataKey:"label"}),o.a.createElement(s.o,null),o.a.createElement(s.m,null),o.a.createElement(s.e,{strokeDasharray:"3 3"}),o.a.createElement(s.g,null))}},{key:"renderChartTypeBar",value:function(){return o.a.createElement(s.d,{data:this.state.chart.data},o.a.createElement(s.e,{strokeDasharray:"3 3"}),o.a.createElement("defs",null,this.state.chart.columnHeaders.map((function(t,e){return o.a.createElement("linearGradient",{key:e,id:"color"+e%d.length,x1:"0",y1:"0",x2:"0",y2:"1"},o.a.createElement("stop",{offset:"10%",stopColor:d[e%d.length],stopOpacity:.8}),o.a.createElement("stop",{offset:"95%",stopColor:d[e%d.length],stopOpacity:.1}))}))),this.state.chart.columnHeaders.map((function(t,e){return o.a.createElement(s.c,{key:e,name:t.label,dataKey:t.dataKey,stroke:d[e%d.length],fillOpacity:1,fill:"url(#color".concat(e%d.length,")")})})),o.a.createElement(s.n,{dataKey:"label"}),o.a.createElement(s.o,null),o.a.createElement(s.m,{cursor:{fill:"transparent"}}),o.a.createElement(s.g,null))}},{key:"renderChartTypeArea",value:function(){return o.a.createElement(s.b,{data:this.state.chart.data},o.a.createElement(s.e,{strokeDasharray:"3 3"}),o.a.createElement("defs",null,this.state.chart.columnHeaders.map((function(t,e){return o.a.createElement("linearGradient",{key:e,id:"color"+e%d.length,x1:"0",y1:"0",x2:"0",y2:"1"},o.a.createElement("stop",{offset:"10%",stopColor:d[e%d.length],stopOpacity:.8}),o.a.createElement("stop",{offset:"95%",stopColor:d[e%d.length],stopOpacity:.1}))}))),this.state.chart.columnHeaders.map((function(t,e){return o.a.createElement(s.a,{key:e,name:t.label,type:"monotone",dataKey:t.dataKey,stroke:d[e%d.length],fillOpacity:1,fill:"url(#color".concat(e%d.length,")")})})),o.a.createElement(s.n,{dataKey:"label"}),o.a.createElement(s.o,null),o.a.createElement(s.m,null),o.a.createElement(s.g,null))}},{key:"renderChartTypePie",value:function(){var t=this,e=function(t){var e=t.index,r=t.x,n=t.y,a=t.midAngle,i=t.value,s="bottom",l=a<80||a>280?"start":"end",c=r,u=n;return(a>=80&&a<=100||a>=260&&a<=280)&&(l="middle"),a>=260&&a<=280&&(u+=15),(a>=340||a<=20||a>=160&&a<=200)&&(s="central"),o.a.createElement("text",{x:c,y:u,fill:d[e%d.length],alignmentBaseline:s,textAnchor:l},i)};return o.a.createElement(s.k,null,o.a.createElement("defs",null,this.state.chart.data.map((function(t,e){return o.a.createElement("linearGradient",{key:e,id:"color"+e%d.length,x1:"0",y1:"0",x2:"0",y2:"1"},o.a.createElement("stop",{offset:"5%",stopColor:d[e%d.length],stopOpacity:1}),o.a.createElement("stop",{offset:"95%",stopColor:d[e%d.length],stopOpacity:.5}))}))),this.state.chart.columnHeaders.map((function(r,n){return o.a.createElement(s.j,{key:n,data:t.state.chart.data,dataKey:r.dataKey,nameKey:"value"===r.dataKey?"label":r.dataKey+"__label",label:e,startAngle:45,endAngle:405},t.state.chart.data.map((function(t,e){return o.a.createElement(s.f,{key:"cell-".concat(e),fillOpacity:1,fill:"url(#color".concat(e%d.length,")")})})))})),o.a.createElement(s.m,null),o.a.createElement(s.g,null))}},{key:"render",value:function(){if(this.props.chartType){if(this.state.showLoadingSpinner)return o.a.createElement(a.a,null);if(this.state.chart.data)return this.state.chart.data.length<1?o.a.createElement("div",{className:"alert alert-warning",role:"alert"},"No results for chart."):o.a.createElement("div",null,o.a.createElement(s.l,{height:400},this.renderChart()))}return null}}])&&c(e.prototype,r),n&&c(e,n),p}(o.a.Component);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=w(t);if(e){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S(this,r)}}function S(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/**
 * Pimcore
 *
 * This source file is available under following license:
 * - Pimcore Enterprise License (PEL)
 *
 *  @copyright  Copyright (c) Pimcore GmbH (http://www.pimcore.org)
 *  @license    http://www.pimcore.org/license     PEL
 */var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(l,t);var e,r,n,s=v(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this,t)).isLoading=!1,e.state={content:"",showLoadingSpinner:!1},e}return e=l,(r=[{key:"loadData",value:function(t,e,r,n,o,a,s,l){this.isLoading&&this.controller.abort(),this.isLoading=!0,this.controller=new AbortController,this.signal=this.controller.signal;var c=r.map((function(t){return t.value})),u=n.map((function(t){return t.value}));if("statistic"===e&&c.length>0||"list"===e&&u.length>0){this.setState({showLoadingSpinner:!0}),this.loadingTimeout&&clearTimeout(this.loadingTimeout);var f=new URLSearchParams({dataSource:t.value,statisticMode:e,rows:c,columns:u,fieldSettings:a,configurationId:l,filters:s});this.loadingTimeout=setTimeout(function(){var t=this;fetch(o+"?"+f,{signal:this.signal}).then(i.a).then((function(t){return t.text()})).then((function(e){t.setState({content:e,showLoadingSpinner:!1}),t.isLoading=!1})).catch((function(e){if("AbortError"!==e.name){var r='<div class="alert alert-warning" role="alert">'+e+"</div>";t.setState({content:r,showLoadingSpinner:!1})}t.isLoading=!1}))}.bind(this),800)}else this.setState({content:"",showLoadingSpinner:!1})}},{key:"componentDidMount",value:function(){this.loadData(this.props.selectedDataSource,this.props.statisticMode,this.props.rows,this.props.columns,this.props.dataUrl,this.props.fieldSettings,this.props.filters,this.props.configurationId)}},{key:"componentDidUpdate",value:function(t,e,r){this.props.columns===t.columns&&this.props.rows===t.rows&&this.props.fieldSettings===t.fieldSettings&&this.props.filters===t.filters&&this.props.selectedDataSource.value===t.selectedDataSource.value&&this.props.statisticMode===t.statisticMode||this.loadData(this.props.selectedDataSource,this.props.statisticMode,this.props.rows,this.props.columns,this.props.dataUrl,this.props.fieldSettings,this.props.filters,this.props.configurationId)}},{key:"render",value:function(){return this.state.showLoadingSpinner?o.a.createElement(a.a,null):o.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})}}])&&g(e.prototype,r),n&&g(e,n),l}(o.a.Component);
/**
 * Pimcore
 *
 * This source file is available under following license:
 * - Pimcore Enterprise License (PEL)
 *
 *  @copyright  Copyright (c) Pimcore GmbH (http://www.pimcore.org)
 *  @license    http://www.pimcore.org/license     PEL
 */
function O(t){return o.a.createElement("div",null,t.showChart&&t.chartType&&o.a.createElement("div",{className:t.showTable?"mb-5":""},o.a.createElement(y,{configurationId:t.configurationId,dataUrl:t.dataUrl,selectedDataSource:t.selectedDataSource,rows:t.rows,columns:t.columns,filters:JSON.stringify((e=t.filters,e.filter((function(t){return t.field&&t.operator})))),fieldSettings:JSON.stringify(t.fieldSettings),chartType:t.chartType})),t.showTable&&o.a.createElement("div",null,o.a.createElement(E,{configurationId:t.configurationId,dataUrl:t.dataUrl,selectedDataSource:t.selectedDataSource,statisticMode:t.statisticMode,rows:t.rows,columns:t.columns,filters:JSON.stringify(t.filters),fieldSettings:JSON.stringify(t.fieldSettings)})));var e}},wlN6:function(t,e,r){"use strict";r("NBAS"),r("ExoC");var n=r("q1tI"),o=r.n(n);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/**
 * Pimcore
 *
 * This source file is available under following license:
 * - Pimcore Enterprise License (PEL)
 *
 *  @copyright  Copyright (c) Pimcore GmbH (http://www.pimcore.org)
 *  @license    http://www.pimcore.org/license     PEL
 */var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(u,t);var e,r,n,a=c(u);function u(){return i(this,u),a.apply(this,arguments)}return e=u,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("div",{className:"lds-ripple"},o.a.createElement("div",null),o.a.createElement("div",null)))}}])&&s(e.prototype,r),n&&s(e,n),u}(o.a.Component);e.a=p},z7dE:function(t,e,r){}},[["PPAC","runtime",0]]]);