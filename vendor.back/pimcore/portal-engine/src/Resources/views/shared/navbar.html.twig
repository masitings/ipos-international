<header class="full-height-layout__fit">
    <nav class="main-navbar js-main-nav">
        <div class="main-navbar__top">
            <div class="container">
                <div class="row no-gutters flex-nowrap align-items-center">
                    <div class="col-3 col-md-2 main-navbar__logo">
                        <a href="{{ document.property(constant("Pimcore\\Bundle\\PortalEngineBundle\\Enum\\Routing::NAVIGATION_ROOT_PROPERTY")) ?? portalEngine_portalConfig().portalDocument }}">
                            <img class="img-fluid" src="{{ portalEngine_images_logo(constant('Pimcore\\Bundle\\PortalEngineBundle\\Enum\\ImageThumbnails::LOGO')) }}">
                        </a>
                    </div>
                    <div class="col col-md-7 mx-auto">
                        <div class="main-navbar__top__search text-right" id="typeahead-search"></div>
                    </div>
                    <div class="col-auto col-md-2">
                        <div class="d-flex align-items-center justify-content-end js-main-nav__list">
                            <div class="main-navbar__top__item">
                                <a href="{{ path("pimcore_portalengine_collection_list") }}"
                                   title="{{ "portal-engine.navbar.collections"|trans }}">
                                    <svg viewBox="0 0 22 24"
                                         xmlns="http://www.w3.org/2000/svg"
                                         class="main-navbar__top__item__icon">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="doc-(1)" fill="currentcolor" fill-rule="nonzero">
                                                <path d="M14.578,3 C15.1083896,3 15.6170145,3.21090125 15.9919913,3.586 L18.406,6 C18.7810987,6.37498546 18.9918825,6.88361037 18.9918825,7.414 L18.9918825,21.499 C18.9918825,22.6035695 18.0965695,23.4990177 16.9919913,23.4990177 C9.0530682,23.4288902 4.40783883,23.3938264 3.0563033,23.3938264 C1.70476777,23.3938264 1.029,22.7622176 1.029,21.499 L16.4919913,21.5 C16.7681424,21.5 16.9919913,21.2761424 16.9919913,21 L16.9919913,7.621 C16.9919719,7.4886475 16.939469,7.3617055 16.846,7.268 L14.725,5.146 C14.6310493,5.05228605 14.5036989,4.999763 14.371,5 L3.49199135,5 C3.21585763,5 2.99199135,5.22385763 2.99199135,5.5 C2.99199135,10.3890498 2.99199135,14.5558371 2.99199135,18.0003619 C2.99199135,20.8447586 2.77137247,21.499 3.85310856,21.5 C4.42363051,21.5005274 3.48226099,21.5001941 1.029,21.499 L0.99199135,5 C0.99199135,3.8954305 1.8874305,3 2.99199135,3 L14.578,3 Z" id="Combined-Shape-path"></path>
                                                <path d="M17.585,-7.99999995e-08 C18.1157362,-7.99999995e-08 18.6247695,0.21065617 18.9999912,0.586 L21.414,2.99999992 C21.7890987,3.37498546 21.9998596,3.88361037 21.9998596,4.414 L21.9998596,18.499 C21.9998596,19.6035695 21.1045695,20.499 19.9999912,20.499 C19.9999912,19.0170949 19.9999912,18.1840949 19.9999912,17.9999999 L19.9999912,4.621 C19.9999719,4.48864755 19.947469,4.36170554 19.854,4.268 L17.732,2.146 C17.6382945,2.05253105 17.5113525,2.00002812 17.379,1.99999992 L6.49999116,1.99999992 C6.31590214,1.99999992 5.48252495,1.99999992 3.99985958,1.99999992 C3.99985958,0.8954305 4.8954305,-7.99999995e-08 5.99999116,-7.99999995e-08 L17.585,-7.99999995e-08 Z" id="Combined-Shape-path"></path>
                                            </g>
                                        </g>
                                    </svg>
                                </a>
                            </div>
                            <div class="main-navbar__top__item">
                                <a href="{{ path("pimcore_portalengine_download_cart_detail") }}"
                                   title="{{ "portal-engine.navbar.download-cart"|trans }}">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                         viewBox="0 0 448 512"
                                         class="main-navbar__top__item__icon">
                                        <path fill="currentColor"
                                              d="M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"/>
                                    </svg>
                                </a>
                            </div>
                            <div class="main-navbar__top__item has-children js-main-nav__list-item">
                                <a href="#" class="main-navbar__top__item-content main-navbar__top__item-content--link">
                                    <img src="{{ portalEngine_images_user() }}"
                                         width="46"
                                         height="46"
                                         alt=""
                                         class="img-fluid rounded-circle img-thumbnail">
                                </a>

                                <button type="button" class="main-navbar__top__item-content main-navbar__top__item-content--toggle js-main-nav__list-toggle">
                                    <img src="{{ portalEngine_images_user() }}"
                                         width="46"
                                         height="46"
                                         alt=""
                                         class="img-fluid rounded-circle img-thumbnail">
                                </button>

                                <div class="main-navbar__dropdown">
                                    <ul class="list-unstyled mb-0">

                                        {% block language_selection %}
                                            {% if portalEngine_hasLanguageSelection() %}
                                                <li class="language-switch">
                                                    <select class="form-control language-switch__select" onchange="this.options[this.selectedIndex].value && (window.location = this.options[this.selectedIndex].value);">
                                                        {% for variant in portalEngine_languageSelectionLanguages() %}
                                                            <option value="{{ variant.path }}"{% if portalEngine_currentLanguageSelection() == variant.realFullPath %} selected{% endif %}>{{ variant.navigation_name }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </li>
                                            {% endif %}
                                        {% endblock %}

                                        <li><a class="main-navbar__dropdown__link" href="{{ path('pimcore_portalengine_user_data') }}">{{ "portal-engine.navbar.user-data"|trans }}</a></li>
                                        <li><a class="main-navbar__dropdown__link" href="{{ path('pimcore_portalengine_saved_search_list') }}">{{ "portal-engine.navbar.saved-searches"|trans }}</a></li>

                                        {% if is_granted(constant('Pimcore\\Bundle\\PortalEngineBundle\\Enum\\Permission::STATISTIC_EXPLORER_ACCESS')) %}
                                            <li><a class="main-navbar__dropdown__link" href="{{ path('pimcore_portalengine_statistic_explorer_overview') }}">{{ "portal-engine.navbar.statistic-explorer-overview"|trans }}</a></li>
                                        {% endif %}

                                        <li><a class="main-navbar__dropdown__link" href="{{ path('pimcore_portalengine_public_share_list') }}">{{ "portal-engine.navbar.public-share-list"|trans }}</a></li>
                                        <li><a class="main-navbar__dropdown__link" href="{{ path('pimcore_portalengine_auth_logout') }}">{{ "portal-engine.navbar.logout"|trans }}</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="main-navbar__top__item d-md-none">
                                <button class="main-navbar__toggle collapsed js-main-nav__toggle"
                                        type="button"
                                        aria-expanded="false"
                                        aria-label="Toggle Navigation"
                                        aria-controls="main-navbarbar-nav">
                                    <span class="main-navbar__toggle__line"></span>
                                    <span class="main-navbar__toggle__line"></span>
                                    <span class="main-navbar__toggle__line"></span>
                                    <span class="sr-only">Toggle Navigation</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% block navbarMainNavigation %}

            <div class="main-navbar__container h-100">
                {% set navigation = portalEngine_main_navigation(document) %}

                <section id="main-nav" class="main-nav main-nav--level-0 js-main-nav__collapse">
                    {{ pimcore_nav_renderer("menu").renderPartial(navigation, "@PimcorePortalEngine/shared/navigation/main/partial.html.twig") | raw }}
                </section>
            </div>

        {% endblock %}
    </nav>
</header>
